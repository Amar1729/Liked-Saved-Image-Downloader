<!DOCTYPE html>
<html>
<head>
  <title>Browsing Liked Saved Images</title>
  
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <button class="previousImage" onclick="sendMessage('previousImage')">Previous</button>
  <button class="nextImage" onclick="sendMessage('nextImage')">Next</button>
  <button class="imageAddToFavorites" onclick="sendMessage('imageAddToFavorites')">Favorite</button>
  <button class="previousFavorite" onclick="sendMessage('previousFavorite')">Previous Favorite</button>
  <button class="nextFavorite" onclick="sendMessage('nextFavorite')">Next Favorite</button>
  <p id="message"></p>
  <script>
    var ws = new WebSocket("ws://" + window.location.host + "/randomImageBrowserWebSocket");
    var username = "likedSavedBrowserClient";

    function sendMessage(message) {
        var payload = {
            "command": message,
            "user": username
        }
        // Make the request to the WebSocket.
        ws.send(JSON.stringify(payload));
    }

    ws.onmessage = function(evt) {
        var messageDict = JSON.parse(evt.data);
    document.getElementById("message").innerHTML = messageDict.randomImagePath + ": " + messageDict.serverImagePath + " (" + messageDict.responseToCommand + ")";
	if (messageDict.action == "setImage")
	{
	document.body.style.backgroundImage = "url('/"+messageDict.serverImagePath+"')";
	}
	
    };

	document.addEventListener("DOMContentLoaded", function(){
	// This is a stupid hack because I couldn't figure out when the web socket actually connects (I'm so lazy)
	setTimeout(function(){sendMessage("nextImage");}, 200);
	}, false);
  </script>
</body>
</html>
